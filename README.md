# 🎯 LoL Auction Discord Bot
>  **리그 오브 레전드 팀 경매**를 디스코드에서 손쉽게 진행할 수 있게 해주는 봇입니다.  
> 팀장 등록 -> 팀장 연결 -> 경매자 등록 -> 경매 진행 -> 입찰/패스/퍼즈 -> 낙찰 및 재경매 -> 결과 CSV 출력까지 전 과정을 자동화 합니다.


## 🧩 주요 기능

### ⚙️ 기본 흐름

1. **팀장 등록**
   ```bash
   !팀장 등록 팀명;이름;닉;티어;주라인;부라인;모스트1[;모스트2][;모스트3]
   ```
   - 팀장 정보를 등록합니다.
   - 예: `!팀장 등록 1팀;테스트1;테스트1#KR1;실버1;정글;탑, 미드, 서폿;자크;탈론;리신`
   - 모스트 2, 3은 비워진 상태여도 괜찮습니다 , 값만 입력해 주세요

2. **팀장 계정 연결 (버튼 UI 활성화)**
    ```bash
    !팀장 연결 <팀장닉네임>
    ```
    - 본인 디스코드 계정을 팀장 닉네임과 바인딩합니다.
    - 이후 자신의 턴이 되면 입찰 버튼이 자동 표시되어 클릭만으로 입찰이 가능합니다.

3. **경매자 등록**
    ```bash
    !경매자 등록 (CSV 파일 첨부)
    ```
    또는
    ```bash
    !경매자 등록 이름;닉;티어;주;부;모스트1[;모스트2][;모스트3]
    ```
    - CSV 파일 업로드를 권장합니다 (`이름, 닉네임, 티어, 주라인, 부라인, 모스트1, 모스트2, 모스트3)
    - CSV 파일의 헤더도 경매자로 들어가기 때문에 헤더는 제외하고 입력해 주세요.
    - 모스트 2, 3은 비워진 상태여도 괜찮습니다 , 값만 입력해 주세요

4. **경매 시작**
    ```bash
    !경매 시작 <팀수> <초기포인트>
    ```
    - 예: `!경매 시작 3 1000`
    - 경매 순서를 무작위로 정하고 경매를 시작합니다.
    - 경매자는 순서대로 진행되며, 유찰자는 재경매 라운드에서 다시 경매됩니다.

5. **입찰 / 패스 / 퍼즈**
    - 버튼 UI 또는 텍스트 명령어로 진행 가능
        ```bash
        !입찰 <포인트> # 예: !입찰 200
        !패스
        !퍼즈 / !퍼즈 종료 # 퍼즈 시간은 최대
        ```
    - 입찰 규칙
        - 최소 입찰금: `100P`
        - 입찰 단위: `10P`
        - 본인 잔여 포인트 내에서만 가능
        - 차례당 제한 시간: 100초 (없을 시 자동 패스)
    - 퍼즈는 팀장당 2회, 1회 최대 5분

6. **유찰자 자동 재경매**
    - 모든 라운드가 끝난 뒤, 유찰자들이 있으면 1회 재경매가 자동 실행됩니다.

7. **결과 확인 / 내보내기**
    - 결과 확인 명령어
        ```bash
        !조회 참가자 <이름/닉네임>
        !조회 팀원 <팀명>
        !조회 포인트 <팀명>
        !조회 유찰자
        !조회 경매순서 # 경매 순서도 가능
        ```
    - CSV 결과 파일 다운로드
        ```bash
        !파일 내보내기
        ```


## 💡 조회 기능 요약
| 명령어                | 설명                                     |
| ------------------ | -------------------------------------- |
| `!조회 참가자 <이름/닉네임>` | 경매자 또는 팀장 정보를 조회 (이름, 닉네임, 상태, 낙찰가 포함) |
| `!조회 팀원 <팀명>`      | 팀 구성원과 낙찰가 확인                          |
| `!조회 포인트 <팀명>`     | 팀의 전체/사용/잔여 포인트 조회                     |
| `!조회 유찰자`          | 유찰된 경매자 목록 확인                          |
| `!조회 경매순서`         | 경매 예정 순서 및 상태(대기/진행/낙찰/유찰) 확인          |

## 🧮 입찰 버튼 UI
경매 진행 시, 바인딩 된 팀장에게 아래 버튼이 표시됩니다.
```css
[-100] [-50] [-10]
[+100] [+50] [+10]
[입찰 확정] [패스] [퍼즈]
```
- 실시간 금액 조정 및 입찰 확정 가능
- 제한 시간 초과 시 자동 패스 처리

## 📊 퍼즈 및 전략 타임
- 퍼즈 (`!퍼즈`)  
    -> 팀장당 2회, 회당 최대 5분 정지  
    -> `!퍼즈 종료`로 조기 해제 가능  
- 모든 팀장이 최소 1명 이상을 영입하게 되면 전략 타임 자동 발동 (기본 1분)

## 📁 결과 내보내기
```bash
!파일 내보내기
```
- 낙찰 결과를 CSV 파일(`auction_result_csv`)로 다운로드 합니다.
- 컬럼: `팀명, 팀장 닉네임, 팀원 닉네임, 낙찰가`

## 🧰 관리자용 명령
| 명령어      | 설명                |
| -------- | ----------------- |
| `!유찰`    | 현재 경매자를 강제로 유찰 처리 |
| `!경매 리셋` | 경매 상태 초기화 후 재시작   |

## 🔍 도움말
```bash
!도움말
!도움말 경매
!도움말 조회
```
`!도움말 조회` 명령은 아래 서브 명령어들을 안내합니다.
```diff
!조회 참가자 <이름/닉네임>
!조회 팀원 <팀명>
!조회 포인트 <팀명>
!조회 유찰자
!조회 경매순서
```

## 🏗️ 기술 스택
- Python 3.11+
- discord.py 2.x
- 비동기 구조(asyncio)
- `discord.ui.View` 기반 버튼 인터랙션
- CSV 파싱 (`csv` 모듈)
- 상태 관리(`AuctionState`, `Captaion`, `Player`, `Team` 모델)

## ⚙️ 실행 방법
1. `.env` 파일에 봇 토큰 추가:
    ```bash
    DISCORD_TOKEN=your_discord_bot_token_here
    ```
2. 의존성 설치:
    ```bash
    pip install -r requirements.txt
    ```
3. 봇 실행:
    ```bash
    python bot.py
    ```

## 📚 참고 자료
Discord 개발자 포털 (공식 API 문서): https://discord.com/developers/docs  
discord.py 공식 문서: https://discordpy.readthedocs.io/  
Python Asyncio 가이드: https://docs.python.org/3/library/asyncio.html  
Python CSV 모듈 문서: https://docs.python.org/3/library/csv.html

## 📜 라이선스
**MIT License © 2025  
Developed by 최광혁  
참고 자료: Discord Developer Docs, discord.py 공식 문서, Python 공식 문서**

## 💬 문의 / 개선 제안
이슈나 제안은 GitHub Issue 탭에 남겨주세요.  
PR 환영합니다 🚀